# 遊戲計時器 API 測試腳本

## 環境要求
- 後端已啟動 (python backend/main.py)
- Python requests 套件已安裝

## 執行方式
```bash
cd backend/test-progrm
python test_game_timer.py
```

## 測試項目

### 1. 啟動帶計時器的遊戲
- 測試 API: POST /api/game/start
- 參數: shot_time_limit=30
- 驗證: 遊戲狀態包含時間限制

### 2. 計時器倒數功能
- 測試 API: GET /api/game/timer/state
- 驗證: remaining_time 正確倒數

### 3. 延時功能
- 測試 API: POST /api/game/timer/delay
- 參數: player=1
- 驗證: 剩餘時間 +30秒, delay_used[0]=True

### 4. 延時次數限制
- 再次呼叫延時 API
- 驗證: 返回錯誤 (已使用過延時)

### 5. 對戰時長計算
- 測試 API: GET /api/game/state
- 驗證: game_duration 正確計算

### 6. 超時檢測
- 啟動3秒限制的遊戲
- 等待超時
- 驗證: is_timeout=True

## 預期輸出
```
🧪 開始測試遊戲計時器功能

==================================================
測試 1: 啟動帶計時器的遊戲 (30秒限制)
==================================================
狀態碼: 200
回應: {...}
✅ 測試通過

...

==================================================
🎉 所有測試通過!
==================================================
```

## 注意事項
- 測試會自動等待 5-10 秒以驗證計時器
- 測試會自動清理 (結束遊戲)
- 如果測試失敗,請檢查後端日誌
